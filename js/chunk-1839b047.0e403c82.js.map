{"version":3,"sources":["webpack:///./src/views/MyFav.vue","webpack:///./src/views/MyFav.vue?5281","webpack:///./node_modules/core-js/modules/es.array.find-index.js","webpack:///./node_modules/core-js/modules/es.json.stringify.js"],"names":["class","style","role","colspan","favItems","appear","onBeforeEnter","onEnter","item","index","key","id","data-index","type","delFavItem","title","$filters","currency","price","disabled","status","loadingItem","addCart","data","favList","JSON","parse","localStorage","getItem","products","computed","this","filter","indexOf","methods","findIndex","el","splice","setItem","stringify","getProducts","url","$http","get","then","response","console","log","cart","product_id","qty","post","res","$httpMessageState","animation","gsap","timeline","from","x","opacity","duration","ease","transform","done","to","delay","dataset","onComplete","mounted","__exports__","render","$","$findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","Array","target","proto","forced","callbackfn","arguments","length","undefined","global","getBuiltIn","apply","uncurryThis","fails","$stringify","exec","charAt","charCodeAt","replace","numberToString","toString","tester","low","hi","fix","match","offset","string","prev","next","FORCED","stat","it","replacer","space","i","l","args","result"],"mappings":"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","file":"js/chunk-1839b047.0e403c82.js","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"my-3\">\n      <div class=\"title stack h1\" style=\"--stacks: 3\">\n        <span style=\"--index: 0\">我的最愛</span>\n        <span style=\"--index: 1\">我的最愛</span>\n        <span style=\"--index: 2\">我的最愛</span>\n      </div>\n    </div>\n    <div class=\"row justify-content-center mx-3\">\n      <table class=\"table align-middle\" style=\"margin: 10vh\">\n        <thead>\n          <tr>\n            <th>刪除</th>\n            <th>商品資料</th>\n            <th style=\"width: 110px\">價格</th>\n            <th class=\"text-end\">購買狀態</th>\n          </tr>\n        </thead>\n        <tbody>\n          <template v-if=\"favItems\">\n            <transition-group\n              appear\n              @before-enter=\"onBeforeEnter\"\n              @enter=\"onEnter\"\n            >\n              <tr\n                v-for=\"(item, index) in favItems\"\n                :key=\"item.id\"\n                :data-index=\"index\"\n              >\n                <td>\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-outline-teslaRed btn-sm\"\n                    @click=\"delFavItem(item.id)\"\n                  >\n                    <i class=\"bi bi-x\"></i>\n                  </button>\n                </td>\n                <td>\n                  {{ item.title }}\n                </td>\n                <td class=\"\">NT${{ $filters.currency(item.price) }}</td>\n                <td class=\"text-end\">\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-outline-teslaRed\"\n                    :disabled=\"this.status.loadingItem === item.id\"\n                    @click=\"addCart(item.id)\"\n                  >\n                    加入購物車\n                    <div\n                      v-if=\"this.status.loadingItem === item.id\"\n                      class=\"spinner-grow text-teslaRed spinner-grow-sm\"\n                      role=\"status\"\n                    >\n                      <span class=\"visually-hidden\">Loading...</span>\n                    </div>\n                    <i class=\"fas fa-shopping-cart\"></i>\n                  </button>\n                </td>\n              </tr>\n            </transition-group>\n          </template>\n        </tbody>\n        <tfoot>\n          <tr>\n            <td colspan=\"3\" class=\"text-center\"></td>\n          </tr>\n        </tfoot>\n      </table>\n    </div>\n  </div>\n</template>\n<script>\nimport gsap from \"gsap\";\n\nexport default {\n  data() {\n    return {\n      favList: JSON.parse(localStorage.getItem(\"favoriteItem\")) || [],\n      products: [],\n      status: {\n        loadingItem: \"\",\n      },\n    };\n  },\n  computed: {\n    favItems() {\n      return this.products.filter((item) => {\n        return this.favList.indexOf(item.id) > -1;\n      });\n    },\n  },\n  methods: {\n    delFavItem(id) {\n      let index = this.favList.findIndex((el) => {\n        return id === el;\n      });\n      this.favList.splice(index, 1);\n      localStorage.setItem(\"favoriteItem\", JSON.stringify(this.favList));\n    },\n    getProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.$http.get(url).then((response) => {\n        this.products = response.data.products;\n        console.log(\"products:\", response);\n      });\n    },\n    addCart(id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      const cart = {\n        product_id: id,\n        qty: 1,\n      };\n      this.status.loadingItem = id;\n      this.$http.post(url, { data: cart }).then((res) => {\n        console.log(res);\n        this.status.loadingItem = \"\";\n        this.$httpMessageState(res, \"加入購物車\");\n        // this.getCart();\n      });\n    },\n    animation() {\n      gsap.timeline().from(\".title\", {\n        x: -500,\n        opacity: 0,\n        duration: 3,\n        ease: \"expo.out\",\n      });\n    },\n    onBeforeEnter(el) {\n      el.style.opacity = 0;\n      el.style.transform = \"translateX(-500px)\";\n    },\n    onEnter(el, done) {\n      gsap.to(el, {\n        opacity: 1,\n        x: 0,\n        delay: el.dataset.index * 1,\n        onComplete: done,\n        duration: 2,\n      });\n    },\n  },\n  mounted() {\n    this.getProducts();\n    this.animation();\n  },\n};\n</script>\n","import { render } from \"./MyFav.vue?vue&type=template&id=72574750\"\nimport script from \"./MyFav.vue?vue&type=script&lang=js\"\nexport * from \"./MyFav.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\web projects\\\\e-commerce\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\n\nvar Array = global.Array;\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar exec = uncurryThis(/./.exec);\nvar charAt = uncurryThis(''.charAt);\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar replace = uncurryThis(''.replace);\nvar numberToString = uncurryThis(1.0.toString);\n\nvar tester = /[\\uD800-\\uDFFF]/g;\nvar low = /^[\\uD800-\\uDBFF]$/;\nvar hi = /^[\\uDC00-\\uDFFF]$/;\n\nvar fix = function (match, offset, string) {\n  var prev = charAt(string, offset - 1);\n  var next = charAt(string, offset + 1);\n  if ((exec(low, match) && !exec(hi, next)) || (exec(hi, match) && !exec(low, prev))) {\n    return '\\\\u' + numberToString(charCodeAt(match, 0), 16);\n  } return match;\n};\n\nvar FORCED = fails(function () {\n  return $stringify('\\uDF06\\uD834') !== '\"\\\\udf06\\\\ud834\"'\n    || $stringify('\\uDEAD') !== '\"\\\\udead\"';\n});\n\nif ($stringify) {\n  // `JSON.stringify` method\n  // https://tc39.es/ecma262/#sec-json.stringify\n  // https://github.com/tc39/proposal-well-formed-stringify\n  $({ target: 'JSON', stat: true, forced: FORCED }, {\n    // eslint-disable-next-line no-unused-vars -- required for `.length`\n    stringify: function stringify(it, replacer, space) {\n      for (var i = 0, l = arguments.length, args = Array(l); i < l; i++) args[i] = arguments[i];\n      var result = apply($stringify, null, args);\n      return typeof result == 'string' ? replace(result, tester, fix) : result;\n    }\n  });\n}\n"],"sourceRoot":""}